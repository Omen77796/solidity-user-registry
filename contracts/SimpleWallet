// SPDX-License-Identifier: MIT
pragma solidity ^0.8.20;

contract SimpleWallet {
    address public owner;
    mapping(address => bool) public owners;

    event Withdraw(address indexed to, uint amount);
    event Deposit(address indexed from, uint amount);
    event OwnerAdded(address indexed newOwner);

    constructor() {
        owner = msg.sender;
        owners[msg.sender] = true;
    }

    modifier onlyOwner() {
        require(owners[msg.sender], "No autorizado");
    _;
    }

    receive() external payable {
        emit Deposit(msg.sender, msg.value);
    }

    fallback() external payable {
        emit Deposit(msg.sender, msg.value);
    }

    function getBalance() public view returns (uint) {
        return address(this).balance;
    }

    function withdraw() public onlyOwner {
        uint amount = address(this).balance;
        require(amount > 0, "No hay fondos para retirar");

        (bool success, ) = owner.call{value: amount}("");
        require(success, "Fallo al transferir");

        emit Withdraw(owner, amount);
    }
    
    function withdrawPartial(uint amount) public onlyOwner {
        require(amount > 0, "Monto invalido");
        require(amount <= address(this).balance, "Fondos insuficientes");

        (bool success, ) = owner.call{value: amount}(""); 
        require(success, "Fallo al transferir");

        emit Withdraw(owner, amount);
    } 

    function transferTo(address payable to, uint amount) public onlyOwner {
        require(to != address(0), "Direccion invalida");
        require(amount > 0, "Monto invalido");
        require(amount <= address(this).balance, "Fondos insuficientes");

        (bool success, ) = to.call{value: amount}("");
        require(success, "Transferencia fallida");
        
        emit Withdraw(to, amount);
    }

    function addOwner(address newOwner) public onlyOwner {
        require(newOwner != address(0), "Direccion invalida");
        
        owners[newOwner] = true;
        emit OwnerAdded(newOwner);
    }

}      

    emit Withdraw(owner, amount);
    }

}        
